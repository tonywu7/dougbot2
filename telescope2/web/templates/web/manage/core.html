{% extends 'web/manage/base.html' %}
{% load inspect element async_form %}

{% block main_title %}Core settings{% endblock %}

{% block sections %}

{% section id='global' title='global' %}

{% asyncform discord.forms.prefix id='global-settings' %}
<ul class="form-fields">{{ discord.forms.prefix.as_ul }}</ul>
{% csrf_token %}
<p>Example command: <code><span class="data-command-prefix"></span>echo</code></p>
{% asyncsubmit 'Save' 'primary' %}
{% endform %}

{% endsection %}

{% section id='extensions' title='modules' classes='grid-span-2' %}

{% asyncform discord.forms.extensions id='extension-toggles' %}
{% with discord.forms.extensions as form %}
<div class="form-fields key-value-pair kvp-left form-switch-theme-red-green">
    {% for input in form %}
    {% bs5switch input %}
    {% endfor %}
</div>
{% endwith %}
{% csrf_token %}
{% asyncsubmit 'Update settings' 'primary' %}
{% endform %}

{% endsection %}

{% section id='server-debug' title='debug' %}

{% asyncform discord.forms.sync_models id='sync-models' %}
{% with discord.forms.sync_models as form %}
<ul class="form-fields">{{ discord.forms.sync_models.as_ul }}</ul>
{% endwith %}
{% csrf_token %}

{% asyncsubmit 'Synchronize models' 'outline-warning' %}
<a href="{% url 'web:leave' guild_id=discord.current.id %}" class="btn btn-outline-danger">Leave
    server</a>

{% endform %}

{% endsection %}

{% endblock %}